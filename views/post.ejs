<%- include('partials/header') -%>
<link rel="stylesheet" href = "\css\post.css"></link>


<div class="container">

  <div class="row justify-content-center mt-5">
    <div class="col-6">
      <p><%= user.userName %></p>
      <img class="img-fluid" src="<%= post.image%>" />
      <div class="row">
        <form
          class="col-1"
          action="/post/likePost/<%= post.id %>?_method=PUT"
          method="POST"
        >
          <button class="btn btn-primary fa fa-heart" type="submit"></button>
        </form>

      
        <%if(post.user == user.id){ %>

          
        <form
          action="/post/deletePost/<%= post.id %>?_method=DELETE"
          method="POST"
          class="col-3"
        >
        <button class="btn btn-primary fa fa-trash" type="submit"></button>
        </form>      
        <%}%>
      </div>

      
      <p class="col-3"><%= post.likes %>   likes</p>
      <p><strong><%= user.userName %></strong>:   <%= post.caption %></p>

      <div>
        <form action="/post/<%= post.id %>/comment"
          method="POST"> <!-- Set the action attribute to the route for comment submission -->
          Add comment:
          <input type="text" name = "comment"> <!-- Add a name attribute to identify the input data -->
          <button type="submit">Submit</button> <!-- Add a submit button -->
        </form>
      </div>
    
      <div class="comments">
        <% post.comments.forEach(comment => { %>
          <div class="comment">
            <p><%= comment.text %></p>
            <p><%= comment.user %></p>
            <p><%= comment.date %></p>
      
            <% if (true) { %>
              <% console.log(user.id,post.comments.userID,user.id,post.id) %>
              <form action="/post/deleteComment/<%= post.id %>/<%= comment._id %>?_method=DELETE" method="POST">
                <button class="btn btn-primary fa fa-trash" type="submit">Delete Comment</button>
              </form>
            <% } %>
          </div>
        <% }) %>
      </div>
      </div>
    </div>
  </div>
</div>

<div class = "mt-5" id  = "return">
  <a class="btn btn-primary" href="/profile">Return to Profile</a>
  <a class="btn btn-primary" href="/feed">Return to Feed</a>
</div>




<%- include('partials/footer') -%>
